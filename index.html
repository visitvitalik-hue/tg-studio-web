<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CADRHUB ‚Ä¢ Admin Terminal</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        :root {
            --bg: #050505;
            --card: rgba(20, 20, 35, 0.8);
            --accent: #00f3ff; /* –û—Å–Ω–æ–≤–Ω–æ–π –Ω–µ–æ–Ω (–ì–æ–ª—É–±–æ–π) */
            --warning: #bc13fe; /* –í—Ç–æ—Ä–∏—á–Ω—ã–π (–§–∏–æ–ª–µ—Ç–æ–≤—ã–π) */
            --text: #ffffff;
            --border: 1px solid rgba(255, 255, 255, 0.15);
        }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at 50% 0%, rgba(0, 243, 255, 0.1) 0%, transparent 50%);
            color: var(--text);
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* –ú–µ—Å—Ç–æ –ø–æ–¥ –∫–Ω–æ–ø–∫—É */
        }

        /* === –¢–ò–ö–ï–† (–°–ò–°–¢–ï–ú–ù–´–ô –°–¢–ê–¢–£–°) === */
        .system-status {
            background: rgba(0,0,0,0.9);
            border-bottom: 1px solid var(--accent);
            padding: 8px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent);
            display: flex;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        /* === –ö–û–ù–¢–ï–ô–ù–ï–† === */
        .container {
            padding: 16px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* === –ö–ê–†–¢–û–ß–ö–ò === */
        .panel {
            background: var(--card);
            border: var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }

        .panel-header {
            font-size: 12px;
            color: var(--warning);
            text-transform: uppercase;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* === –í–í–û–î –¢–ï–ö–°–¢–ê === */
        textarea {
            width: 100%;
            background: rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            padding: 12px;
            border-radius: 8px;
            font-size: 15px;
            resize: none;
            outline: none;
            box-sizing: border-box;
            min-height: 120px;
            font-family: inherit;
        }
        textarea:focus { border-color: var(--accent); }

        /* === –ö–ù–û–ü–ö–ò (URL) === */
        .btn-row {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .input-dark {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            color: #fff;
            padding: 10px;
            border-radius: 6px;
            flex: 1;
            font-size: 13px;
            outline: none;
        }
        .input-dark:focus { border-color: var(--accent); }
        
        .add-btn {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: 1px dashed rgba(255,255,255,0.3);
            color: var(--text);
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        /* === –ú–ï–î–ò–ê –¢–ò–ü–´ === */
        .media-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        .media-option {
            background: rgba(255,255,255,0.05);
            border: 1px solid transparent;
            border-radius: 8px;
            padding: 10px 0;
            text-align: center;
            font-size: 10px;
            color: #aaa;
            cursor: pointer;
            transition: 0.2s;
        }
        .media-option.active {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(0, 243, 255, 0.1);
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.2);
        }

        /* === –ß–ï–ö–ë–û–ö–°–´ === */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-size: 14px;
        }
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–≤–∏—Ç—á */
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 20px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 14px;
            width: 14px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(20px); }

        /* === –ì–õ–ê–í–ù–ê–Ø –ö–ù–û–ü–ö–ê === */
        .main-btn {
            position: fixed;
            bottom: 16px;
            left: 16px;
            right: 16px;
            background: var(--accent);
            color: #000;
            font-weight: 900;
            text-transform: uppercase;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.4);
            cursor: pointer;
            z-index: 100;
        }
        .main-btn:active { transform: scale(0.98); }
    </style>
</head>
<body>

    <div class="system-status">
        <span><i data-lucide="shield-check" width="12"></i> SYSTEM: ONLINE</span>
        <span id="userId">USER: ADMIN</span>
    </div>

    <div class="container">
        
        <div class="panel">
            <div class="panel-header"><i data-lucide="file-text" width="14"></i> –†–µ–¥–∞–∫—Ç–æ—Ä –ü–æ—Å—Ç–∞</div>
            <textarea id="postText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞... (Markdown –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)"></textarea>
        </div>

        <div class="panel">
            <div class="panel-header"><i data-lucide="image" width="14"></i> –¢–∏–ø –≤–ª–æ–∂–µ–Ω–∏—è</div>
            <div class="media-selector" id="mediaType">
                <div class="media-option active" onclick="selectMedia('none')">
                    <i data-lucide="x" width="20"></i><br>–ù–µ—Ç
                </div>
                <div class="media-option" onclick="selectMedia('photo')">
                    <i data-lucide="camera" width="20"></i><br>–§–æ—Ç–æ
                </div>
                <div class="media-option" onclick="selectMedia('video')">
                    <i data-lucide="video" width="20"></i><br>–í–∏–¥–µ–æ
                </div>
                <div class="media-option" onclick="selectMedia('circle')">
                    <i data-lucide="circle-dot" width="20"></i><br>–ö—Ä—É–∂–æ–∫
                </div>
            </div>
            <div id="fileUploadInfo" style="margin-top:10px; font-size:12px; color:#aaa; display:none;">
                ‚ö†Ô∏è –ú–µ–¥–∏–∞-—Ñ–∞–π–ª –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å".
            </div>
        </div>

        <div class="panel">
            <div class="panel-header"><i data-lucide="mouse-pointer-2" width="14"></i> URL-–ö–Ω–æ–ø–∫–∏</div>
            <div id="buttonsContainer">
                </div>
            <button class="add-btn" onclick="addButtonRow()">+ –î–æ–±–∞–≤–∏—Ç—å —Ä—è–¥ –∫–Ω–æ–ø–æ–∫</button>
        </div>

        <div class="panel">
            <div class="panel-header"><i data-lucide="settings" width="14"></i> –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</div>
            
            <div class="setting-row">
                <span>üîî –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–∏—Ö–æ (Silent)</span>
                <label class="switch">
                    <input type="checkbox" id="silentCheck">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="setting-row">
                <span>üìå –ó–∞–∫—Ä–µ–ø–∏—Ç—å –≤ –∫–∞–Ω–∞–ª–µ</span>
                <label class="switch">
                    <input type="checkbox" id="pinCheck">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="setting-row">
                <span>üíß –î–æ–±–∞–≤–∏—Ç—å –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ (VIP)</span>
                <label class="switch">
                    <input type="checkbox" id="watermarkCheck" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>

    </div>

    <button class="main-btn" onclick="sendToBot()">
        –°–û–ó–î–ê–¢–¨ –ü–û–°–¢
    </button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        lucide.createIcons();

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–æ–≤ —Ç–µ–º—ã
        tg.setHeaderColor('#050505');
        tg.setBackgroundColor('#050505');

        let currentMediaType = 'none';

        function selectMedia(type) {
            currentMediaType = type;
            document.querySelectorAll('.media-option').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            const info = document.getElementById('fileUploadInfo');
            info.style.display = type === 'none' ? 'none' : 'block';
        }

        function addButtonRow() {
            const container = document.getElementById('buttonsContainer');
            const div = document.createElement('div');
            div.className = 'btn-row';
            div.innerHTML = `
                <input type="text" class="input-dark btn-text" placeholder="–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏">
                <input type="text" class="input-dark btn-url" placeholder="https://...">
                <div style="padding:10px; color:#ff4444;" onclick="this.parentElement.remove()">
                    <i data-lucide="trash" width="16"></i>
                </div>
            `;
            container.appendChild(div);
            lucide.createIcons();
        }

        function sendToBot() {
            const text = document.getElementById('postText').value;
            
            if (!text && currentMediaType === 'none') {
                tg.showPopup({ title: '–û—à–∏–±–∫–∞', message: '–ü–æ—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!' });
                return;
            }

            // –°–±–æ—Ä –∫–Ω–æ–ø–æ–∫
            let buttons = [];
            document.querySelectorAll('.btn-row').forEach(row => {
                let txt = row.querySelector('.btn-text').value;
                let url = row.querySelector('.btn-url').value;
                if(txt && url) buttons.push({text: txt, url: url});
            });

            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ JSON –¥–ª—è —Ç–≤–æ–µ–≥–æ python-telegram-bot
            const payload = {
                action: "create_post", // –¢–≤–æ–π –±–æ—Ç –¥–æ–ª–∂–µ–Ω –ª–æ–≤–∏—Ç—å —ç—Ç–æ—Ç action
                text: text,
                media_type: currentMediaType,
                buttons: buttons,
                settings: {
                    silent: document.getElementById('silentCheck').checked,
                    pin: document.getElementById('pinCheck').checked,
                    watermark: document.getElementById('watermarkCheck').checked
                }
            };

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É
            tg.sendData(JSON.stringify(payload));
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —é–∑–µ—Ä–Ω–µ–π–º
        if(tg.initDataUnsafe && tg.initDataUnsafe.user) {
            document.getElementById('userId').innerText = 
                "OPERATOR: " + tg.initDataUnsafe.user.first_name.toUpperCase();
        }
    </script>
</body>
</html>
