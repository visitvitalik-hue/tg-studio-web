<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0014" />
  <title>CADRHUB ‚Ä¢ Bangkok Cyberpunk 2177</title>

  <style>
    :root{
      --bg0:#07000f;
      --bg1:#0b0014;
      --bg2:#12001f;
      --neonA:#00fff0;
      --neonB:#ff2dff;
      --neonC:#ffcc00;
      --ink:#e9e1ff;
      --mut:#b8a9ff;
      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.12);
      --shadow: 0 18px 60px rgba(0,0,0,.6);
      --radius: 22px;
      --radius2: 14px;
    }

    /* Telegram WebApp safe areas */
    body{
      margin:0;
      color:var(--ink);
      background: radial-gradient(1200px 800px at 10% 10%, #21003a 0%, transparent 55%),
                  radial-gradient(1000px 700px at 90% 20%, #001b2f 0%, transparent 55%),
                  radial-gradient(900px 700px at 50% 110%, #2a001c 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100svh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      padding:
        calc(env(safe-area-inset-top) + 14px)
        calc(env(safe-area-inset-right) + 14px)
        calc(env(safe-area-inset-bottom) + 14px)
        calc(env(safe-area-inset-left) + 14px);
      overflow-x:hidden;
    }

    /* cyber scanlines + noise */
    .fx-scanlines::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,.04),
          rgba(255,255,255,.04) 1px,
          rgba(0,0,0,0) 3px,
          rgba(0,0,0,0) 6px
        );
      mix-blend-mode: overlay;
      opacity:.28;
      z-index: 2;
    }
    .fx-noise::after{
      content:"";
      position:fixed; inset:-40px;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      opacity:.10;
      z-index: 3;
      mix-blend-mode: overlay;
      animation: noiseMove 6s steps(10) infinite;
    }
    @keyframes noiseMove{
      0%{ transform:translate3d(0,0,0) }
      20%{ transform:translate3d(-3%,2%,0) }
      40%{ transform:translate3d(2%,-2%,0) }
      60%{ transform:translate3d(-2%,-1%,0) }
      80%{ transform:translate3d(1%,2%,0) }
      100%{ transform:translate3d(0,0,0) }
    }

    .wrap{
      position:relative;
      z-index:5;
      max-width: 920px;
      margin:0 auto;
    }

    /* top brand bar */
    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 12px;
    }

    .brand{
      display:flex; align-items:center; gap:12px;
      padding: 10px 14px;
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border-radius: 999px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      cursor:pointer;
      user-select:none;
    }
    .brand:active{ transform: translateY(1px); }
    .logo{
      width: 38px; height: 38px;
      border-radius: 14px;
      background:
        radial-gradient(10px 10px at 30% 30%, rgba(255,255,255,.9), transparent 55%),
        conic-gradient(from 210deg, var(--neonA), var(--neonB), var(--neonC), var(--neonA));
      box-shadow:
        0 0 22px rgba(0,255,240,.35),
        0 0 36px rgba(255,45,255,.18);
      position:relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,.35), transparent);
      transform: rotate(20deg);
      animation: shine 2.8s infinite;
      opacity:.65;
    }
    @keyframes shine{
      0%{ transform: translateX(-60%) rotate(20deg) }
      55%{ transform: translateX(60%) rotate(20deg) }
      100%{ transform: translateX(60%) rotate(20deg) }
    }

    .brandTitle{
      display:flex; flex-direction:column; gap:2px;
      line-height:1.0;
    }
    .brandTitle b{
      font-size: 14px;
      letter-spacing:.12em;
      text-transform: uppercase;
    }
    .brandTitle span{
      font-size:12px;
      color: var(--mut);
      opacity:.9;
    }

    .chipRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .chip{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      padding: 9px 12px;
      font-size: 12px;
      color: var(--ink);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
      cursor:pointer;
      user-select:none;
      display:flex; align-items:center; gap:8px;
    }
    .chip:active{ transform: translateY(1px); }
    .dot{
      width:8px; height:8px; border-radius: 99px;
      background: var(--neonA);
      box-shadow: 0 0 14px rgba(0,255,240,.55);
    }
    .dot.pink{ background: var(--neonB); box-shadow: 0 0 14px rgba(255,45,255,.55); }
    .dot.gold{ background: var(--neonC); box-shadow: 0 0 14px rgba(255,204,0,.55); }

    /* ticker */
    .ticker{
      position:relative;
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.04));
      border-radius: 999px;
      overflow:hidden;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      margin: 12px 0 14px;
    }
    .tickerInner{
      display:flex;
      white-space:nowrap;
      gap: 44px;
      padding: 10px 14px;
      align-items:center;
    }
    .tickerBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border:1px solid rgba(0,255,240,.28);
      background: rgba(0,255,240,.08);
      border-radius: 999px;
      font-size: 12px;
      letter-spacing:.08em;
      text-transform: uppercase;
      color: var(--neonA);
      box-shadow: 0 0 22px rgba(0,255,240,.16);
      flex: 0 0 auto;
    }
    .marquee{
      display:flex;
      gap: 44px;
      animation: marquee 18s linear infinite;
      will-change: transform;
    }
    @keyframes marquee{
      0%{ transform: translateX(0) }
      100%{ transform: translateX(-50%) }
    }
    .tickerText{
      color: rgba(233,225,255,.92);
      font-size: 13px;
      text-shadow: 0 0 12px rgba(255,45,255,.12);
    }
    .tickerHint{
      color: rgba(184,169,255,.75);
      font-size: 12px;
      margin-left: 8px;
    }

    /* hero card */
    .hero{
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.03));
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      position:relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(600px 220px at 10% 10%, rgba(0,255,240,.18), transparent 60%),
        radial-gradient(600px 220px at 90% 10%, rgba(255,45,255,.16), transparent 60%),
        radial-gradient(500px 300px at 50% 110%, rgba(255,204,0,.11), transparent 60%);
      z-index:0;
    }
    .heroIn{
      position:relative;
      z-index:1;
      display:flex;
      gap: 14px;
      align-items:stretch;
      flex-wrap: wrap;
    }

    .preview{
      flex: 1 1 320px;
      min-height: 190px;
      border-radius: var(--radius);
      border:1px dashed rgba(255,255,255,.22);
      background: rgba(0,0,0,.22);
      position:relative;
      overflow:hidden;
    }
    .previewCanvas{
      position:absolute; inset:0;
      background:
        radial-gradient(140px 140px at 20% 40%, rgba(0,255,240,.18), transparent 55%),
        radial-gradient(160px 160px at 80% 30%, rgba(255,45,255,.14), transparent 55%),
        radial-gradient(200px 200px at 50% 110%, rgba(255,204,0,.12), transparent 55%),
        linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .previewOverlay{
      position:absolute; inset:0;
      display:flex;
      align-items:flex-end;
      padding: 12px;
      gap:10px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.16);
      font-size: 12px;
      color: rgba(233,225,255,.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }

    .heroRight{
      flex: 1 1 280px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .h1{
      margin:0;
      font-size: 18px;
      letter-spacing:.06em;
      text-transform: uppercase;
    }
    .sub{
      margin:0;
      font-size: 13px;
      color: rgba(184,169,255,.92);
      line-height: 1.35;
    }

    .ctaRow{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 6px;
    }
    .btn{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      border-radius: 16px;
      padding: 12px 12px;
      color: var(--ink);
      font-weight: 700;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      backdrop-filter: blur(12px);
      transition: transform .06s ease;
    }
    .btn:active{ transform: translateY(1px); }
    .btnPrimary{
      border-color: rgba(0,255,240,.30);
      background: linear-gradient(180deg, rgba(0,255,240,.14), rgba(255,45,255,.10));
      box-shadow: 0 0 24px rgba(0,255,240,.10), 0 18px 60px rgba(0,0,0,.45);
    }
    .btnGhost{
      background: rgba(0,0,0,.25);
    }
    .kbd{
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color: rgba(233,225,255,.90);
    }

    /* accordion sections */
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 12px;
    }

    details.card{
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.03));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
    }
    details.card summary{
      list-style:none;
      cursor:pointer;
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      user-select:none;
      outline:none;
    }
    details.card summary::-webkit-details-marker{ display:none; }

    .sumLeft{
      display:flex; align-items:center; gap:12px;
      min-width: 0;
    }
    .icon{
      width: 42px; height: 42px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(14px 14px at 28% 30%, rgba(255,255,255,.8), transparent 55%),
        linear-gradient(135deg, rgba(0,255,240,.14), rgba(255,45,255,.10));
      box-shadow: 0 0 26px rgba(255,45,255,.10);
      flex: 0 0 auto;
      position:relative;
      overflow:hidden;
    }
    .icon::after{
      content:"";
      position:absolute; inset:-50%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,.35), transparent);
      transform: rotate(20deg);
      opacity:.40;
      animation: shine 3.6s infinite;
    }

    .sumText{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .sumText b{
      font-size: 14px;
      letter-spacing:.06em;
      text-transform: uppercase;
    }
    .sumText span{
      font-size: 12px;
      color: rgba(184,169,255,.90);
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 70vw;
    }

    .sumRight{
      display:flex; align-items:center; gap:10px;
      flex: 0 0 auto;
      color: rgba(233,225,255,.80);
      font-size: 12px;
    }
    .chev{
      width: 10px; height: 10px;
      border-right: 2px solid rgba(233,225,255,.65);
      border-bottom: 2px solid rgba(233,225,255,.65);
      transform: rotate(45deg);
      transition: transform .12s ease;
    }
    details[open] .chev{ transform: rotate(225deg); }

    .cardBody{
      border-top: 1px solid rgba(255,255,255,.10);
      padding: 12px 12px 14px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 10px;
    }
    @media (min-width: 760px){
      .cardBody{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }

    .item{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      border-radius: var(--radius2);
      padding: 12px;
      cursor:pointer;
      user-select:none;
      position:relative;
      overflow:hidden;
      min-height: 94px;
      transition: transform .08s ease;
    }
    .item:active{ transform: translateY(1px); }
    .item::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(140px 80px at 10% 15%, rgba(0,255,240,.10), transparent 60%),
        radial-gradient(140px 80px at 90% 20%, rgba(255,45,255,.09), transparent 60%);
      opacity:.95;
      z-index:0;
    }
    .itemIn{
      position:relative;
      z-index:1;
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .item b{
      font-size: 13px;
      letter-spacing:.03em;
      text-transform: uppercase;
    }
    .item span{
      font-size: 12px;
      color: rgba(184,169,255,.90);
      line-height: 1.25;
    }
    .tag{
      align-self:flex-start;
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(233,225,255,.9);
    }

    /* modal preview */
    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:flex-end;
      justify-content:center;
      background: rgba(0,0,0,.55);
      z-index: 50;
      padding:
        calc(env(safe-area-inset-top) + 12px)
        calc(env(safe-area-inset-right) + 12px)
        calc(env(safe-area-inset-bottom) + 12px)
        calc(env(safe-area-inset-left) + 12px);
    }
    .modal.show{ display:flex; }
    .sheet{
      width: min(920px, 100%);
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(180deg, rgba(16,0,28,.86), rgba(0,0,0,.66));
      box-shadow: 0 26px 80px rgba(0,0,0,.75);
      backdrop-filter: blur(18px);
      overflow:hidden;
      transform: translateY(10px);
      animation: pop .12s ease forwards;
    }
    @keyframes pop{ to{ transform: translateY(0); } }
    .sheetTop{
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .sheetTop b{
      font-size: 13px;
      letter-spacing:.06em;
      text-transform: uppercase;
    }
    .x{
      width: 40px; height: 40px;
      border-radius: 14px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      user-select:none;
    }
    .x:active{ transform: translateY(1px); }

    .sheetBody{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .mock{
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
      min-height: 240px;
    }
    .mock::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(240px 180px at 30% 30%, rgba(0,255,240,.12), transparent 60%),
        radial-gradient(260px 180px at 80% 25%, rgba(255,45,255,.10), transparent 60%),
        radial-gradient(340px 220px at 50% 110%, rgba(255,204,0,.08), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .mockIn{
      position:absolute; inset:0;
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .mockRow{
      display:flex; gap:10px; align-items:center;
    }
    .ph{
      width: 44px; height: 44px;
      border-radius: 16px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 0 22px rgba(0,255,240,.10);
    }
    .lines{
      display:flex; flex-direction:column; gap:6px;
      flex:1;
    }
    .line{
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.10);
      width: 70%;
    }
    .line.s{ width: 45%; opacity:.85; }
    .media{
      flex:1;
      border-radius: 20px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      position:relative;
      overflow:hidden;
    }
    .media::after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,.28), transparent);
      transform: rotate(20deg);
      animation: shine 3.4s infinite;
      opacity:.35;
    }

    .sheetActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-size: 12px;
      color: rgba(184,169,255,.88);
      line-height: 1.3;
      margin:0;
    }

    /* bottom nav */
    .bottomNav{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      opacity:.95;
    }

    .small{
      font-size:12px;
      color: rgba(184,169,255,.86);
    }

    /* glitch title */
    .glitch{
      position:relative;
      display:inline-block;
      text-shadow: 0 0 18px rgba(0,255,240,.16);
    }
    .glitch::before, .glitch::after{
      content: attr(data-text);
      position:absolute;
      left:0; top:0;
      opacity:.55;
      clip-path: inset(0 0 0 0);
      mix-blend-mode: screen;
    }
    .glitch::before{
      transform: translate(1px,0);
      color: var(--neonA);
      animation: glitchA 3.2s infinite;
    }
    .glitch::after{
      transform: translate(-1px,0);
      color: var(--neonB);
      animation: glitchB 2.7s infinite;
    }
    @keyframes glitchA{
      0%,100%{ clip-path: inset(0 0 92% 0); }
      10%{ clip-path: inset(42% 0 42% 0); }
      18%{ clip-path: inset(18% 0 60% 0); }
      28%{ clip-path: inset(70% 0 14% 0); }
      40%{ clip-path: inset(0 0 88% 0); }
      60%{ clip-path: inset(40% 0 40% 0); }
      78%{ clip-path: inset(62% 0 24% 0); }
    }
    @keyframes glitchB{
      0%,100%{ clip-path: inset(88% 0 0 0); }
      12%{ clip-path: inset(12% 0 70% 0); }
      22%{ clip-path: inset(52% 0 34% 0); }
      36%{ clip-path: inset(24% 0 60% 0); }
      52%{ clip-path: inset(70% 0 12% 0); }
      66%{ clip-path: inset(44% 0 38% 0); }
      84%{ clip-path: inset(18% 0 68% 0); }
    }

    /* mobile tweaks */
    @media (max-width: 420px){
      .brandTitle b{ font-size: 13px; }
      .hero{ padding: 12px; }
      .cardBody{ grid-template-columns: 1fr; }
      .sumText span{ max-width: 62vw; }
    }
  </style>
</head>

<body class="fx-scanlines fx-noise">
  <div class="wrap">
    <div class="top">
      <div class="brand" id="brandBtn" title="–û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª/—á–∞—Ç CADRHUB">
        <div class="logo"></div>
        <div class="brandTitle">
          <b class="glitch" data-text="CADRHUB">CADRHUB</b>
          <span>Bangkok Cyberpunk ‚Ä¢ 2177 build</span>
        </div>
      </div>

      <div class="chipRow">
        <div class="chip" id="chipHall"><span class="dot"></span><span>–ó–∞–ª —Å–ª–∞–≤—ã</span></div>
        <div class="chip" id="chipGames"><span class="dot pink"></span><span>–ò–≥—Ä—ã</span></div>
        <div class="chip" id="chipPromo"><span class="dot gold"></span><span>–ê–∫—Ü–∏–∏</span></div>
      </div>
    </div>

    <!-- ticker (admin controlled via url ?ticker=...) -->
    <div class="ticker" id="tickerBox" style="display:none">
      <div class="tickerInner">
        <div class="tickerBadge"><span class="dot"></span><span>LIVE</span></div>
        <div class="marquee" id="marquee">
          <div class="tickerText" id="tickerTextA"></div>
          <div class="tickerText" id="tickerTextB"></div>
        </div>
        <div class="tickerHint">‚ö° –Ω–æ–≤–æ—Å—Ç–∏ / –∞–∫—Ü–∏–∏ / –ø—Ä–∏–∫–æ–ª—ã</div>
      </div>
    </div>

    <div class="hero">
      <div class="heroIn">
        <div class="preview" id="heroPreview">
          <div class="previewCanvas"></div>
          <div class="previewOverlay">
            <div class="pill">üé• Preview ‚Ä¢ <span id="heroMode">–ö–∞—Ç–∞–ª–æ–≥</span></div>
            <div class="pill">üíé CADRART / CADRHUB</div>
          </div>
        </div>

        <div class="heroRight">
          <h1 class="h1">–¢–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç-–∑–∞–≤–æ–¥ –≤ –¢–µ–ª–µ–≥–µ</h1>
          <p class="sub">
            –í—ã–±–∏—Ä–∞–π —Ä–µ–∂–∏–º ‚ûú –∑–∞–≥—Ä—É–∑–∏ –≤–∏–¥–µ–æ/—Ñ–æ—Ç–æ –≤ –±–æ—Ç–µ ‚ûú –ø–æ–ª—É—á–∏ –ø–∞–∫–µ—Ç:
            <b>–∫—Ä—É–∂–æ–∫ / –∞–≤–∞—Ç–∞—Ä / —ç–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ / –ø–æ—Å—Ç / –∫–æ–ª–ª–∞–∂</b>.
            –í—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Ä–æ–≥–æ. –í—Å—ë –¥–µ–ª–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ.
          </p>
          <div class="ctaRow">
            <div class="btn btnPrimary" id="btnHow">
              <span>‚öôÔ∏è –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</span>
              <span class="kbd">tap</span>
            </div>
            <div class="btn btnGhost" id="btnRandom">
              <span>üé≤ –ü–æ–¥–æ–±—Ä–∞—Ç—å –ø–∞–∫–µ—Ç</span>
              <span class="kbd">rng</span>
            </div>
          </div>
          <p class="hint" id="hintLine">
            –°–æ–≤–µ—Ç—ã: —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º ‚ûú –ø–æ—Ç–æ–º –∑–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª –≤ –±–æ—Ç–µ.
            –í –º–∏–Ω–∏-–∞–ø–ø–∫–µ —Ç—ã –≤–∏–¥–∏—à—å ‚Äú–∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å‚Äù.
          </p>
        </div>
      </div>
    </div>

    <div class="grid" id="grid">
      <!-- POSTS / STYLES 6 -->
      <details class="card" open>
        <summary>
          <div class="sumLeft">
            <div class="icon"></div>
            <div class="sumText">
              <b>–ü–æ—Å—Ç—ã ‚Ä¢ —Å—Ç–∏–ª–∏ (6)</b>
              <span>–ù–∞–≥–ª—è–¥–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã —Ç–µ–∫—Å—Ç–∞ + –º–µ–¥–∏–∞, —á—Ç–æ–±—ã –∑–∞–ª–∏–ø–∞–ª–∏</span>
            </div>
          </div>
          <div class="sumRight">
            <span>6</span><div class="chev"></div>
          </div>
        </summary>
        <div class="cardBody" id="secPosts"></div>
      </details>

      <!-- COLLAGES 3 -->
      <details class="card">
        <summary>
          <div class="sumLeft">
            <div class="icon"></div>
            <div class="sumText">
              <b>–ö–æ–ª–ª–∞–∂–∏ (3)</b>
              <span>–í–∏–¥–µ–æ+—Ñ–æ—Ç–æ –≤ –æ–¥–Ω–æ–º –∫–∞–¥—Ä–µ, —á—Ç–æ–±—ã ‚Äú–≤–∞—É‚Äù –±–µ–∑ –º–æ–Ω—Ç–∞–∂–∞</span>
            </div>
          </div>
          <div class="sumRight">
            <span>3</span><div class="chev"></div>
          </div>
        </summary>
        <div class="cardBody" id="secCollage"></div>
      </details>

      <!-- EMOJI VIDEO GRIDS 3 -->
      <details class="card">
        <summary>
          <div class="sumLeft">
            <div class="icon"></div>
            <div class="sumText">
              <b>–°–µ—Ç–∫–∏ —ç–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ (3)</b>
              <span>1√ó20 / 3√ó3 / 20√ó1 ‚Äî –¥–ª—è –ø—Ä–µ–º–∏—É–º-–ø–∞–∫–æ–≤</span>
            </div>
          </div>
          <div class="sumRight">
            <span>3</span><div class="chev"></div>
          </div>
        </summary>
        <div class="cardBody" id="secEmoji"></div>
      </details>

      <!-- VIDEO MODES 7 -->
      <details class="card">
        <summary>
          <div class="sumLeft">
            <div class="icon"></div>
            <div class="sumText">
              <b>–ò–∑ –≤–∏–¥–µ–æ (7)</b>
              <span>–ö—Ä—É–∂–æ–∫ / –∞–≤–∞—Ç–∞—Ä / 9:16 / 16:9 / noir / boomerang / audio</span>
            </div>
          </div>
          <div class="sumRight">
            <span>7</span><div class="chev"></div>
          </div>
        </summary>
        <div class="cardBody" id="secVideo"></div>
      </details>
    </div>

    <div class="bottomNav">
      <div class="small" id="smallStatus">‚ö° Ready. –ñ–º–∏ –∫–∞—Ä—Ç–æ—á–∫—É ‚ûú —É–≤–∏–¥–∏—à—å –ø—Ä–µ–≤—å—é.</div>
      <div class="chip" id="btnBack"><span class="dot"></span><span>Back</span></div>
    </div>
  </div>

  <!-- modal -->
  <div class="modal" id="modal">
    <div class="sheet">
      <div class="sheetTop">
        <b id="modalTitle">Preview</b>
        <div class="x" id="modalClose">‚úï</div>
      </div>
      <div class="sheetBody">
        <div class="mock">
          <div class="mockIn">
            <div class="mockRow">
              <div class="ph"></div>
              <div class="lines">
                <div class="line"></div>
                <div class="line s"></div>
              </div>
              <div class="pill" id="modalTag">‚ö°</div>
            </div>
            <div class="media" id="modalMedia"></div>
            <p class="hint" id="modalText"></p>
          </div>
        </div>

        <div class="sheetActions">
          <div class="btn btnPrimary" id="btnPick">‚úÖ –í—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º</div>
          <div class="btn btnGhost" id="btnCopy">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç</div>
          <div class="btn btnGhost" id="btnMore">‚ú® –ü—Ä–µ–¥–ª–æ–∂–∏ –µ—â—ë</div>
        </div>

        <p class="hint" id="modalHint">
          –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ –±–æ—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª.
          –ú–∏–Ω–∏-–∞–ø–ø–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ‚Äú–∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å‚Äù.
        </p>
      </div>
    </div>
  </div>

  <script>
    // Telegram WebApp bridge (safe)
    const tg = window.Telegram?.WebApp;
    try{ tg?.ready(); tg?.expand(); } catch(e){}

    // === ticker (admin sends text; bot adds ?ticker=... in url) ===
    function getParam(name){
      const u = new URL(location.href);
      return u.searchParams.get(name) || "";
    }
    const tickerParam = getParam("ticker");
    const tickerTextRaw = decodeURIComponent(tickerParam || "").trim();
    const tickerBox = document.getElementById("tickerBox");
    if (tickerTextRaw){
      tickerBox.style.display = "block";
      const a = document.getElementById("tickerTextA");
      const b = document.getElementById("tickerTextB");
      a.textContent = tickerTextRaw;
      b.textContent = tickerTextRaw;
    }

    // clickable logo
    let brandLink = getParam("brand") || ""; // you will add later
    document.getElementById("brandBtn").addEventListener("click", ()=>{
      if (brandLink){
        window.open(brandLink, "_blank");
      }else{
        toast("–î–∞–π —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞–Ω–∞–ª/—á–∞—Ç ‚Äî —Å–¥–µ–ª–∞—é –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º ‚úÖ");
      }
    });

    // data
    const DATA = {
      posts: [
        { key:"style_pov", title:"POV ‚Ä¢ –¥–µ—Ä–∑–∫–∏–π", tag:"–ü–û–°–¢", desc:"–°—Ç–∏–ª—å POV, –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ç—Ä–æ–∫–∏, —É–¥–∞—Ä–Ω—ã–µ —Ñ—Ä–∞–∑—ã. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä—É–∂–∫–∞/–∞–≤–∞—Ç–∞—Ä–∞." ,
          sample:"POV: —Ç—ã –≤–ª–µ—Ç–∞–µ—à—å –≤ Telegram, –∏ –æ–Ω —É–∂–µ –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Ä–æ–∂–µ.\\n\\n‚ö°Ô∏è –ö—Ä—É–∂–æ–∫ –≥–æ—Ç–æ–≤\\nüß© –≠–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ\\nüü£ –ê–≤–∞—Ç–∞—Ä ‚Äî –∫–∞–∫ —É —Ç–æ–ø–æ–≤\\n\\n–•–æ—á–µ—à—å —Ç–∞–∫ –∂–µ? –ñ–º–∏ –∫–Ω–æ–ø–∫—É üëá"},
        { key:"style_insider", title:"–ò–Ω—Å–∞–π–¥–µ—Ä ‚Ä¢ —Ö–∞–π–ø", tag:"–ü–û–°–¢", desc:"–ö–∞–∫ –±—É–¥—Ç–æ —Ç—ã ‚Äú–≤ —Ç–µ–º–µ‚Äù. –ó–∞–ª–∏–ø–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å, —Ü–µ–ø–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç—ã.",
          sample:"–°–ª–∏–≤–∞—é —Å—Ö–µ–º—É, –∫–æ—Ç–æ—Ä—É—é —é–∑–∞—é—Ç –∞–¥–º–∏–Ω—ã üíÖ\\n\\n1) –í–∏–¥–µ–æ ‚Üí CADRHUB\\n2) –ü–æ–ª—É—á–∞–µ—à—å –∫—Ä—É–∂–æ–∫ + —ç–º–æ–¥–∑–∏-–ø–∞–∫\\n3) –ü–æ—Å—Ç —É–∂–µ –≥–æ—Ç–æ–≤\\n\\n‚ö°Ô∏è –ö—Ç–æ –≤–ª–µ—Ç–∞–µ—Ç —Å–µ–≥–æ–¥–Ω—è ‚Äî –∑–∞–±–∏—Ä–∞–µ—Ç –±–æ–Ω—É—Å."},
        { key:"style_oldmoney", title:"Old Money ‚Ä¢ —ç–ª–∏—Ç–Ω–æ", tag:"–ü–û–°–¢", desc:"–î–æ—Ä–æ–≥–æ, –ª–∞–∫–æ–Ω–∏—á–Ω–æ, –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ. –î–ª—è –±—Ä–µ–Ω–¥–æ–≤/—ç–∫—Å–ø–µ—Ä—Ç–æ–≤.",
          sample:"–ú–∏–Ω–∏–º–∞–ª–∏–∑–º. –°–∫–æ—Ä–æ—Å—Ç—å. –ö–∞—á–µ—Å—Ç–≤–æ.\\n\\n‚Ä¢ –ö—Ä—É–∂–æ–∫ ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π\\n‚Ä¢ –ê–≤–∞—Ç–∞—Ä ‚Äî —á–∏—Å—Ç—ã–π\\n‚Ä¢ –≠–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ ‚Äî –ø—Ä–µ–º–∏—É–º\\n\\n–û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –ª–∏—à–Ω–µ–µ."},
        { key:"style_noir", title:"Noir ‚Ä¢ –∫–∏–Ω–æ", tag:"–ü–û–°–¢", desc:"–ì—É—Å—Ç–æ, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ. –û—Ç–ª–∏—á–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ –Ω–æ—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö.",
          sample:"–ì–æ—Ä–æ–¥ —à—É–º–∏—Ç. –≠–∫—Ä–∞–Ω —Å–≤–µ—Ç–∏—Ç—Å—è.\\n\\n–¢—ã –Ω–∞–∂–∏–º–∞–µ—à—å ‚Äú–°–¥–µ–ª–∞—Ç—å –∫—Ä—É–∂–æ–∫‚Äù ‚Äî –∏ –ø–æ–ª—É—á–∞–µ—à—å –∫–∏–Ω–æ.\\n\\nüñ§ Noir-—Ä–µ–∂–∏–º –≤–∫–ª—é—á—ë–Ω."},
        { key:"style_girly", title:"Glow ‚Ä¢ –º–∏–ª–æ+–Ω–µ–æ–Ω", tag:"–ü–û–°–¢", desc:"–õ—ë–≥–∫–∏–π, –º–∏–ª—ã–π, –Ω–æ —Å –Ω–µ–æ–Ω–æ–º. –ù–æ—Ä–º –¥–ª—è lifestyle/beauty.",
          sample:"–°–µ–≥–æ–¥–Ω—è –º—ã –¥–µ–ª–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ ‚ú®\\n\\nüé• –í–∏–¥–µ–æ ‚Üí –∫—Ä—É–∂–æ–∫\\nüü£ –ê–≤–∞—Ç–∞—Ä ‚Üí –≥–æ—Ç–æ–≤\\nüß© –≠–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ ‚Üí –≤–∞—É\\n\\n–°–æ—Ö—Ä–∞–Ω–∏, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å üíú"},
        { key:"style_brutal", title:"BRUTAL ‚Ä¢ –∫–æ—Ä–æ—Ç–∫–æ", tag:"–ü–û–°–¢", desc:"–û–¥–∏–Ω —É–¥–∞—Ä ‚Äî –æ–¥–∏–Ω —Å–º—ã—Å–ª. –î–ª—è –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤/–º–µ–º-–∫–∞–Ω–∞–ª–æ–≤.",
          sample:"–ö–†–£–ñ–û–ö.\\n–ê–í–ê–¢–ê–†.\\n–≠–ú–û–î–ó–ò-–ü–ê–ö.\\n\\n–°–¥–µ–ª–∞–Ω–æ.\\n\\n–•–æ—á–µ—à—å? ‚Üí –ñ–º–∏."},
      ],
      collage: [
        { key:"collage_grid", title:"–ö–æ–ª–ª–∞–∂ ‚Ä¢ 2√ó2", tag:"–ö–û–õ–õ–ê–ñ", desc:"–í–∏–¥–µ–æ+—Ñ–æ—Ç–æ –≤ —Å–µ—Ç–∫–µ. –î–ª—è –ø–æ–¥–±–æ—Ä–æ–∫/—Ä–µ–∫–ª–∞–º—ã/–æ–±–∑–æ—Ä–æ–≤." },
        { key:"collage_story", title:"–ö–æ–ª–ª–∞–∂ ‚Ä¢ Story", tag:"–ö–û–õ–õ–ê–ñ", desc:"–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –º–∏–∫—Å: —Ç–∏—Ç—Ä + –≤–∏–¥–µ–æ + –¥–µ—Ç–∞–ª–∏." },
        { key:"collage_brand", title:"–ö–æ–ª–ª–∞–∂ ‚Ä¢ Brand", tag:"–ö–û–õ–õ–ê–ñ", desc:"–ú–∏–Ω–∏-–±–∞–Ω–Ω–µ—Ä: –ª–æ–≥–æ, CTA, –≤–∏–¥–µ–æ-–∫–∞–¥—Ä, —Ü–µ–Ω–∞/–∞–∫—Ü–∏—è." },
      ],
      emoji: [
        { key:"grid_3x3", title:"–≠–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ ‚Ä¢ 3√ó3", tag:"EMOJI", desc:"–ü–∞–∫ –∏–∑ 9 —à—Ç—É–∫, —ç—Ñ—Ñ–µ–∫—Ç ‚Äú–¥–æ—Ä–æ–≥–æ–π –Ω–∞–±–æ—Ä‚Äù." },
        { key:"grid_20x1", title:"–≠–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ ‚Ä¢ 20√ó1", tag:"EMOJI", desc:"–¢–∞–π–º–ª–∞–π–Ω-–ø–∞–∫ 20 —à—Ç—É–∫ (–ø–æ 3 —Å–µ–∫). –¢–≤–æ–π –≥–ª–∞–≤–Ω—ã–π —Ö–∏—Ç." },
        { key:"grid_strip", title:"–≠–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ ‚Ä¢ 1√ó6", tag:"EMOJI", desc:"–ö–æ—Ä–æ—Ç–∫–∏–π –º–∏–Ω–∏-–ø–∞–∫, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å." },
      ],
      video: [
        { key:"circle", title:"–ö—Ä—É–∂–æ–∫ ‚Ä¢ Live", tag:"VIDEO", desc:"–í–∏–¥–µ–æ-–∫—Ä—É–∂–æ–∫ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π. –ú–∞–∫—Å–∏–º—É–º —É–¥–µ—Ä–∂–∞–Ω–∏—è." },
        { key:"avatar", title:"–í–∏–¥–µ–æ-–∞–≤–∞—Ç–∞—Ä", tag:"VIDEO", desc:"–î–ª—è –ø—Ä–æ—Ñ–∏–ª—è/–∫–∞–Ω–∞–ª–∞. –ß—ë—Ç–∫–∏–π, –º—è–≥–∫–∏–π, —Å—Ç–∏–ª—å–Ω—ã–π." },
        { key:"9_16", title:"–í–µ—Ä—Ç–∏–∫–∞–ª ‚Ä¢ 9:16", tag:"VIDEO", desc:"–ü–æ–¥ —Å—Ç–æ—Ä–∏—Å/shorts-–ø–æ—Å—Ç—ã." },
        { key:"16_9", title:"–ì–æ—Ä–∏–∑–æ–Ω—Ç ‚Ä¢ 16:9", tag:"VIDEO", desc:"–ü–æ–¥ YouTube/–æ–±–∑–æ—Ä—ã/–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏." },
        { key:"fx_noir", title:"FX ‚Ä¢ Noir", tag:"FX", desc:"–ß—ë—Ä–Ω–æ-–±–µ–ª—ã–π —Ñ–∏–ª—å–º + –≤–∏–Ω—Ç–∞–∂–Ω—ã–µ –∫—Ä–∏–≤—ã–µ." },
        { key:"fx_boomerang", title:"FX ‚Ä¢ Boomerang", tag:"FX", desc:"–†–µ–≤–µ—Ä—Å-–ø–µ—Ç–ª—è. –í–∏—Ä–∞–ª—å–Ω–∞—è —à—Ç—É–∫–∞." },
        { key:"fx_audio", title:"Audio ‚Ä¢ mp3", tag:"AUDIO", desc:"–í—ã—Ç–∞—â–∏—Ç—å –∑–≤—É–∫. –ì–æ–ª–æ—Å/–º—É–∑—ã–∫–∞/—ç—Ñ—Ñ–µ–∫—Ç—ã." },
      ]
    };

    // build ui
    function mkItem(obj){
      const d = document.createElement("div");
      d.className = "item";
      d.innerHTML = `
        <div class="itemIn">
          <div class="tag">${obj.tag}</div>
          <b>${escapeHtml(obj.title)}</b>
          <span>${escapeHtml(obj.desc)}</span>
        </div>
      `;
      d.addEventListener("click", ()=> openPreview(obj));
      return d;
    }
    function mount(id, arr){
      const root = document.getElementById(id);
      root.innerHTML = "";
      arr.forEach(x => root.appendChild(mkItem(x)));
    }
    mount("secPosts", DATA.posts);
    mount("secCollage", DATA.collage);
    mount("secEmoji", DATA.emoji);
    mount("secVideo", DATA.video);

    // modal
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const modalTag = document.getElementById("modalTag");
    const modalText = document.getElementById("modalText");
    const modalMedia = document.getElementById("modalMedia");
    const btnPick = document.getElementById("btnPick");
    const btnCopy = document.getElementById("btnCopy");
    const btnMore = document.getElementById("btnMore");
    const status = document.getElementById("smallStatus");
    let current = null;

    function openPreview(obj){
      current = obj;
      modalTitle.textContent = obj.title;
      modalTag.textContent = obj.tag;
      modalText.textContent = (obj.sample ? obj.sample : ("–ü—Ä–µ–≤—å—é: " + obj.desc));
      modalMedia.style.background = makeMediaBg(obj.key);
      modal.classList.add("show");
      status.textContent = "üëÄ –ü—Ä–µ–≤—å—é –æ—Ç–∫—Ä—ã—Ç–æ. –í—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º –∏–ª–∏ –ø–æ–ø—Ä–æ—Å–∏ –µ—â—ë.";
      try{ tg?.HapticFeedback?.impactOccurred("light"); } catch(e){}
    }
    function closeModal(){
      modal.classList.remove("show");
      try{ tg?.HapticFeedback?.impactOccurred("soft"); } catch(e){}
    }
    document.getElementById("modalClose").addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=>{ if(e.target === modal) closeModal(); });

    btnPick.addEventListener("click", ()=>{
      if(!current) return;
      // send selection to bot
      const payload = {
        type: "video_setup",
        mode: current.key,
        caption: "",
        // optional: tell bot to show specific templates/stuff
      };
      try{
        tg?.sendData(JSON.stringify(payload));
      } catch(e){}
      toast("‚úÖ –†–µ–∂–∏–º –≤—ã–±—Ä–∞–Ω. –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –≤ –±–æ—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–π —Ñ–∞–π–ª.");
    });

    btnCopy.addEventListener("click", async ()=>{
      if(!current) return;
      const txt = current.sample || current.desc || "";
      try{
        await navigator.clipboard.writeText(txt);
        toast("üìã –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω");
      } catch(e){
        toast("–ù–µ —Å–º–æ–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å (–±—Ä–∞—É–∑–µ—Ä). –ù–æ —Ç–µ–∫—Å—Ç —É–∂–µ –≤ –ø—Ä–µ–≤—å—é.");
      }
    });

    btnMore.addEventListener("click", ()=>{
      const pack = rngPack();
      toast("üé≤ –ü–∞–∫: " + pack.map(x=>x.title).join(" + "));
      // show one of them
      openPreview(pack[0]);
    });

    // top chips
    document.getElementById("chipHall").addEventListener("click", ()=>{
      toast("üèÜ –ó–∞–ª —Å–ª–∞–≤—ã —Å–∫–æ—Ä–æ. –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö / –¥–µ–Ω—å / –Ω–µ–¥–µ–ª—è / –º–µ—Å—è—Ü.");
    });
    document.getElementById("chipGames").addEventListener("click", ()=>{
      toast("üé∞ –ò–≥—Ä—ã —Å–∫–æ—Ä–æ. –†—É–ª–µ—Ç–∫–∞ —Å ZERO –∏ –ø—Ä–∏–∑–∞–º–∏ (VIP/–±–∞–ª–ª—ã).");
    });
    document.getElementById("chipPromo").addEventListener("click", ()=>{
      toast("üí• –ê–∫—Ü–∏–∏: –∞–¥–º–∏–Ω –≤–∫–ª—é—á–∞–µ—Ç, —Ç–∏–∫–µ—Ä —Å–æ–æ–±—â–∞–µ—Ç –≤—Å–µ–º. –°–ª–µ–¥–∏ –∑–∞ –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–æ–π.");
    });

    // buttons
    document.getElementById("btnHow").addEventListener("click", ()=>{
      openHelp();
    });
    document.getElementById("btnRandom").addEventListener("click", ()=>{
      const pack = rngPack();
      openPreview(pack[0]);
      toast("üé≤ –†–∞–Ω–¥–æ–º-–ø–∞–∫: " + pack.map(x=>x.title).join(" + "));
    });

    // back
    document.getElementById("btnBack").addEventListener("click", ()=>{
      try{ tg?.close(); } catch(e){ history.back(); }
    });

    // help modal content (reuse modal)
    function openHelp(){
      current = { key:"help", title:"–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è CADRHUB", tag:"HELP", desc:"", sample:
`1) –í –º–∏–Ω–∏-–∞–ø–ø–∫–µ –≤—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º (—Ç—ã —Å–µ–π—á–∞—Å —Ç—É—Ç).  
2) –ù–∞–∂–º–∏ ‚Äú‚úÖ –í—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º‚Äù.  
3) –í–µ—Ä–Ω–∏—Å—å –≤ –±–æ—Ç–∞ ‚Äî –æ–Ω –ø–æ–ø—Ä–æ—Å–∏—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ/—Ñ–æ—Ç–æ.  
4) –ü–æ–ª—É—á–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∫—Ä—É–∂–æ–∫/–∞–≤–∞—Ç–∞—Ä/—ç–º–æ–¥–∑–∏-–ø–∞–∫/–ø–æ—Å—Ç/–∫–æ–ª–ª–∞–∂.

‚ö° –õ–∞–π—Ñ—Ö–∞–∫:
‚Äî –•–æ—á–µ—à—å ‚Äú–¥–æ—Ä–æ–≥–æ‚Äù? –°—Ä–∞–∑—É –¥–µ–ª–∞–π: 20√ó1 —ç–º–æ–¥–∑–∏ + –ø–æ—Å—Ç –≤ —Å—Ç–∏–ª–µ POV.  
‚Äî –î–ª—è –ø—Ä–æ—Ñ–∏–ª—è: –í–∏–¥–µ–æ-–∞–≤–∞—Ç–∞—Ä + Noir.  
‚Äî –î–ª—è —Ä–µ–∫–ª–∞–º—ã: 16:9 + Brand-–∫–æ–ª–ª–∞–∂.`};
      openPreview(current);
    }

    // random pack generator
    function rng(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
    function rngPack(){
      const pickPost = rng(DATA.posts);
      const pickVideo = rng(DATA.video);
      const pickEmoji = rng(DATA.emoji);
      const pickColl = rng(DATA.collage);
      // sometimes return 3, sometimes 4
      const pack = [pickVideo, pickEmoji, pickPost];
      if (Math.random() > 0.55) pack.push(pickColl);
      return pack;
    }

    // media background by mode (fake preview)
    function makeMediaBg(key){
      const map = {
        "circle": "radial-gradient(220px 220px at 30% 35%, rgba(0,255,240,.24), transparent 60%), radial-gradient(260px 240px at 80% 30%, rgba(255,45,255,.18), transparent 60%), linear-gradient(135deg, rgba(255,255,255,.06), rgba(0,0,0,.14))",
        "avatar": "radial-gradient(220px 220px at 50% 40%, rgba(255,45,255,.18), transparent 60%), radial-gradient(260px 240px at 20% 70%, rgba(0,255,240,.14), transparent 60%), linear-gradient(135deg, rgba(255,255,255,.06), rgba(0,0,0,.16))",
        "grid_20x1": "repeating-linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.10) 12px, rgba(0,0,0,0) 12px, rgba(0,0,0,0) 24px), radial-gradient(240px 160px at 80% 40%, rgba(0,255,240,.12), transparent 60%), linear-gradient(135deg, rgba(255,45,255,.10), rgba(0,0,0,.18))",
        "grid_3x3": "repeating-linear-gradient(90deg, rgba(255,255,255,.09), rgba(255,255,255,.09) 22px, rgba(0,0,0,0) 22px, rgba(0,0,0,0) 44px), repeating-linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,.06) 22px, rgba(0,0,0,0) 22px, rgba(0,0,0,0) 44px), radial-gradient(240px 160px at 20% 40%, rgba(255,204,0,.10), transparent 60%)",
        "16_9": "linear-gradient(90deg, rgba(0,255,240,.12), rgba(255,45,255,.12)), radial-gradient(300px 180px at 30% 30%, rgba(255,255,255,.10), transparent 60%), linear-gradient(135deg, rgba(0,0,0,.20), rgba(255,255,255,.05))",
        "9_16": "linear-gradient(0deg, rgba(0,255,240,.10), rgba(255,45,255,.10)), radial-gradient(300px 180px at 60% 30%, rgba(255,204,0,.09), transparent 60%), linear-gradient(135deg, rgba(0,0,0,.20), rgba(255,255,255,.05))"
      };
      return map[key] || "radial-gradient(240px 160px at 30% 30%, rgba(0,255,240,.12), transparent 60%), radial-gradient(260px 180px at 80% 25%, rgba(255,45,255,.10), transparent 60%), linear-gradient(135deg, rgba(255,255,255,.06), rgba(0,0,0,.16))";
    }

    // toast
    let toastTimer = null;
    function toast(text){
      clearTimeout(toastTimer);
      let t = document.getElementById("toast");
      if(!t){
        t = document.createElement("div");
        t.id = "toast";
        t.style.position="fixed";
        t.style.left="50%";
        t.style.bottom="calc(env(safe-area-inset-bottom) + 18px)";
        t.style.transform="translateX(-50%)";
        t.style.padding="10px 12px";
        t.style.border="1px solid rgba(255,255,255,.16)";
        t.style.background="rgba(0,0,0,.55)";
        t.style.backdropFilter="blur(12px)";
        t.style.borderRadius="999px";
        t.style.color="rgba(233,225,255,.95)";
        t.style.fontSize="13px";
        t.style.boxShadow="0 20px 60px rgba(0,0,0,.55)";
        t.style.zIndex="99";
        document.body.appendChild(t);
      }
      t.textContent = text;
      t.style.opacity="1";
      toastTimer = setTimeout(()=>{ t.style.opacity="0"; }, 2600);
    }

    // escape
    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // FUN random telegram jokes in ticker if empty
    if(!tickerTextRaw){
      const fun = [
        "–ü—Ä–∞–∑–¥–Ω–∏–∫ —Å–∫–æ—Ä–æ: –µ—Å–ª–∏ Telegram –¥–∞—Å—Ç –Ω–∞–º 1000 –∑–≤—ë–∑–¥ ‚Äî –º—ã –¥–∞–¥–∏–º –≤–∞–º VIP üòÑ",
        "–ö—Ä—É–∂–æ–∫ ‚Äî —ç—Ç–æ –Ω–æ–≤–∞—è –≤–∞–ª—é—Ç–∞. CADRHUB –ø–µ—á–∞—Ç–∞–µ—Ç –¥–µ–Ω—å–≥–∏ üü£",
        "–°–µ–∫—Ä–µ—Ç: —ç–º–æ–¥–∑–∏-–≤–∏–¥–µ–æ = —É–¥–µ—Ä–∂–∞–Ω–∏–µ. –ù–∞–∑—ã–≤–∞–π —ç—Ç–æ –º–∞–≥–∏–µ–π ‚ú®",
        "–ê–¥–º–∏–Ω –Ω–∞ –º–∏–Ω—É—Ç—É –æ—Ç–≤–ª—ë–∫—Å—è ‚Äî –∏ –≤—ã —É–∂–µ —Å–¥–µ–ª–∞–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –±—ã—Å—Ç—Ä–µ–µ SMM-–æ—Ç–¥–µ–ª–∞ üòé",
        "–ï—Å–ª–∏ –≤–∏–¥–∏—à—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É ‚Äî –∑–Ω–∞—á–∏—Ç —Å–µ–≥–æ–¥–Ω—è –∫—Ç–æ-—Ç–æ –ø–æ–π–º–∞–µ—Ç –±–æ–Ω—É—Å üéÅ"
      ];
      const chosen = fun[Math.floor(Math.random()*fun.length)];
      tickerBox.style.display = "block";
      document.getElementById("tickerTextA").textContent = chosen;
      document.getElementById("tickerTextB").textContent = chosen;
    }

    // minor: show selected mode hint
    const heroMode = document.getElementById("heroMode");
    document.getElementById("grid").addEventListener("click", (e)=>{
      const it = e.target.closest(".item");
      if(!it) return;
      heroMode.textContent = "Preview";
    });

  </script>
</body>
</html>
